!function(t){"object"==typeof module&&module.exports?module.exports=t:t(Highcharts)}(function(t){!function(t){function e(t,e){var i=t.indexOf("#each("),r=t.indexOf("#plural("),s=t.indexOf("["),o=t.indexOf("]");if(-1<i){var s=t.slice(i).indexOf(")")+i,a=t.substring(0,i),r=t.substring(s+1),s=t.substring(i+6,s).split(","),i=Number(s[1]);if(t="",e=e[s[0]])for(i=isNaN(i)?e.length:i,i=0>i?e.length+i:Math.min(i,e.length),s=0;s<i;++s)t+=a+e[s]+r;return t.length?t:""}if(-1<r){switch(a=t.slice(r).indexOf(")")+r,t=t.substring(r+8,a).split(","),Number(e[t[0]])){case 0:t=n(t[4],t[1]);break;case 1:t=n(t[2],t[1]);break;case 2:t=n(t[3],t[1]);break;default:t=t[1]}return t?(e=t,e=e.trim&&e.trim()||e.replace(/^\s+|\s+$/g,"")):e="",e}return-1<s?(r=t.substring(0,s),t=Number(t.substring(s+1,o)),e=e[r],!isNaN(t)&&e&&(0>t?void 0===(a=e[e.length+t])&&(a=e[0]):void 0===(a=e[t])&&(a=e[e.length-1])),void 0!==a?a:""):"{"+t+"}"}var i=t.each,n=t.pick;t.i18nFormat=function(n,r,s){var o,a,l=[];a=0;do{o=function(t,e){var i=(t=t.slice(e||0)).indexOf("{"),n=t.indexOf("}");if(-1<i&&n>i)return{statement:t.substring(i+1,n),begin:e+i+1,end:e+n}}(n,a),(a=n.substring(a,o&&o.begin-1)).length&&l.push({value:a,type:"constant"}),o&&l.push({value:o.statement,type:"statement"}),a=o&&o.end+1}while(o);return i(l,function(t){"statement"===t.type&&(t.value=e(t.value,r))}),t.format(t.reduce(l,function(t,e){return t+e.value},""),r,s)},t.Chart.prototype.langFormat=function(e,i,n){e=e.split(".");for(var r=this.options.lang,s=0;s<e.length;++s)r=r&&r[e[s]];return"string"==typeof r&&t.i18nFormat(r,i,n)},t.setOptions({lang:{accessibility:{screenReaderRegionLabel:"Chart screen reader information.",navigationHint:"Use regions/landmarks to skip ahead to chart {#plural(numSeries, and navigate between data series,)}",defaultChartTitle:"Chart",longDescriptionHeading:"Long description.",noDescription:"No description available.",structureHeading:"Structure.",viewAsDataTable:"View as data table.",chartHeading:"Chart graphic.",chartContainerLabel:"Interactive chart. {title}. Use up and down arrows to navigate with most screen readers.",rangeSelectorMinInput:"Select start date.",rangeSelectorMaxInput:"Select end date.",tableSummary:"Table representation of chart.",mapZoomIn:"Zoom chart",mapZoomOut:"Zoom out chart",rangeSelectorButton:"Select range {buttonText}",legendItem:"Toggle visibility of series {itemName}",svgContainerTitle:"{chartTitle}",seriesTypeDescriptions:{boxplot:"Box plot charts are typically used to display groups of statistical data. Each data point in the chart can have up to 5 values: minimum, lower quartile, median, upper quartile, and maximum.",arearange:"Arearange charts are line charts displaying a range between a lower and higher value for each point.",areasplinerange:"These charts are line charts displaying a range between a lower and higher value for each point.",bubble:"Bubble charts are scatter charts where each data point also has a size value.",columnrange:"Columnrange charts are column charts displaying a range between a lower and higher value for each point.",errorbar:"Errorbar series are used to display the variability of the data.",funnel:"Funnel charts are used to display reduction of data in stages.",pyramid:"Pyramid charts consist of a single pyramid with item heights corresponding to each point value.",waterfall:"A waterfall chart is a column chart where each column contributes towards a total end value."},chartTypes:{emptyChart:"Empty chart",mapTypeDescription:"Map of {mapTitle} with {numSeries} data series.",unknownMap:"Map of unspecified region with {numSeries} data series.",combinationChart:"Combination chart with {numSeries} data series.",defaultSingle:"Chart with {numPoints} data {#plural(numPoints, points, point)}.",defaultMultiple:"Chart with {numSeries} data series.",splineSingle:"Line chart with {numPoints} data {#plural(numPoints, points, point)}.",splineMultiple:"Line chart with {numSeries} lines.",lineSingle:"Line chart with {numPoints} data {#plural(numPoints, points, point)}.",lineMultiple:"Line chart with {numSeries} lines.",columnSingle:"Bar chart with {numPoints} {#plural(numPoints, bars, bar)}.",columnMultiple:"Bar chart with {numSeries} data series.",barSingle:"Bar chart with {numPoints} {#plural(numPoints, bars, bar)}.",barMultiple:"Bar chart with {numSeries} data series.",pieSingle:"Pie chart with {numPoints} {#plural(numPoints, slices, slice)}.",pieMultiple:"Pie chart with {numSeries} pies.",scatterSingle:"Scatter chart with {numPoints} {#plural(numPoints, points, point)}.",scatterMultiple:"Scatter chart with {numSeries} data series.",boxplotSingle:"Boxplot with {numPoints} {#plural(numPoints, boxes, box)}.",boxplotMultiple:"Boxplot with {numSeries} data series.",bubbleSingle:"Bubble chart with {numPoints} {#plural(numPoints, bubbles, bubble)}.",bubbleMultiple:"Bubble chart with {numSeries} data series."},axis:{xAxisDescriptionSingular:"The chart has 1 X axis displaying {names[0]}.",xAxisDescriptionPlural:"The chart has {numAxes} X axes displaying {#each(names, -1) }and {names[-1]}",yAxisDescriptionSingular:"The chart has 1 Y axis displaying {names[0]}.",yAxisDescriptionPlural:"The chart has {numAxes} Y axes displaying {#each(names, -1) }and {names[-1]}"},exporting:{chartMenuLabel:"Chart export",menuButtonLabel:"View export menu",exportRegionLabel:"Chart export menu"},series:{summary:{default:"{name}, series {ix} of {numSeries} with {numPoints} data {#plural(numPoints, points, point)}.",defaultCombination:"{name}, series {ix} of {numSeries} with {numPoints} data {#plural(numPoints, points, point)}.",line:"{name}, line {ix} of {numSeries} with {numPoints} data {#plural(numPoints, points, point)}.",lineCombination:"{name}, series {ix} of {numSeries}. Line with {numPoints} data {#plural(numPoints, points, point)}.",spline:"{name}, line {ix} of {numSeries} with {numPoints} data {#plural(numPoints, points, point)}.",splineCombination:"{name}, series {ix} of {numSeries}. Line with {numPoints} data {#plural(numPoints, points, point)}.",column:"{name}, bar series {ix} of {numSeries} with {numPoints} {#plural(numPoints, bars, bar)}.",columnCombination:"{name}, series {ix} of {numSeries}. Bar series with {numPoints} {#plural(numPoints, bars, bar)}.",bar:"{name}, bar series {ix} of {numSeries} with {numPoints} {#plural(numPoints, bars, bar)}.",barCombination:"{name}, series {ix} of {numSeries}. Bar series with {numPoints} {#plural(numPoints, bars, bar)}.",pie:"{name}, pie {ix} of {numSeries} with {numPoints} {#plural(numPoints, slices, slice)}.",pieCombination:"{name}, series {ix} of {numSeries}. Pie with {numPoints} {#plural(numPoints, slices, slice)}.",scatter:"{name}, scatter plot {ix} of {numSeries} with {numPoints} {#plural(numPoints, points, point)}.",scatterCombination:"{name}, series {ix} of {numSeries}, scatter plot with {numPoints} {#plural(numPoints, points, point)}.",boxplot:"{name}, boxplot {ix} of {numSeries} with {numPoints} {#plural(numPoints, boxes, box)}.",boxplotCombination:"{name}, series {ix} of {numSeries}. Boxplot with {numPoints} {#plural(numPoints, boxes, box)}.",bubble:"{name}, bubble series {ix} of {numSeries} with {numPoints} {#plural(numPoints, bubbles, bubble)}.",bubbleCombination:"{name}, series {ix} of {numSeries}. Bubble series with {numPoints} {#plural(numPoints, bubbles, bubble)}.",map:"{name}, map {ix} of {numSeries} with {numPoints} {#plural(numPoints, areas, area)}.",mapCombination:"{name}, series {ix} of {numSeries}. Map with {numPoints} {#plural(numPoints, areas, area)}.",mapline:"{name}, line {ix} of {numSeries} with {numPoints} data {#plural(numPoints, points, point)}.",maplineCombination:"{name}, series {ix} of {numSeries}. Line with {numPoints} data {#plural(numPoints, points, point)}.",mapbubble:"{name}, bubble series {ix} of {numSeries} with {numPoints} {#plural(numPoints, bubbles, bubble)}.",mapbubbleCombination:"{name}, series {ix} of {numSeries}. Bubble series with {numPoints} {#plural(numPoints, bubbles, bubble)}."},description:"{description}",xAxisDescription:"X axis, {name}",yAxisDescription:"Y axis, {name}"}}}})}(t),function(t){function e(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}function i(t){return"string"==typeof t?t.replace(/<\/?[^>]+(>|$)/g,""):t}function n(t){for(var e=t.childNodes.length;e--;)t.appendChild(t.childNodes[e])}var r=t.win.document,s=t.each,o=t.map,a=t.erase,l=t.addEvent,h=t.merge,u={position:"absolute",left:"-9999px",top:"auto",width:"1px",height:"1px",overflow:"hidden"};t.Series.prototype.commonKeys="name id category x value y".split(" "),t.Series.prototype.specialKeys="z open high q3 median q1 low close".split(" "),t.seriesTypes.pie&&(t.seriesTypes.pie.prototype.specialKeys=[]),t.setOptions({accessibility:{enabled:!0,pointDescriptionThreshold:!1,screenReaderSectionFormatter:function(t){var i=t.options,n=t.types||[],r={chart:t,numSeries:t.series&&t.series.length},n=(1===n.length&&"pie"===n[0]||"map"===n[0])&&{}||t.getAxesDescription();return"<div>"+t.langFormat("accessibility.navigationHint",r)+"</div><h3>"+(i.title.text?e(i.title.text):t.langFormat("accessibility.defaultChartTitle",r))+(i.subtitle&&i.subtitle.text?". "+e(i.subtitle.text):"")+"</h3><h4>"+t.langFormat("accessibility.longDescriptionHeading",r)+"</h4><div>"+(i.chart.description||t.langFormat("accessibility.noDescription",r))+"</div><h4>"+t.langFormat("accessibility.structureHeading",r)+"</h4><div>"+(i.chart.typeDescription||t.getTypeDescription())+"</div>"+(n.xAxis?"<div>"+n.xAxis+"</div>":"")+(n.yAxis?"<div>"+n.yAxis+"</div>":"")}}}),t.addEvent(t.Series,"afterRender",function(){this.chart.options.accessibility.enabled&&this.setA11yDescription()}),t.Series.prototype.setA11yDescription=function(){var t=this.chart.options.accessibility,e=this.points&&this.points.length&&this.points[0].graphic&&this.points[0].graphic.element,r=e&&e.parentNode||this.graph&&this.graph.element||this.group&&this.group.element;r&&(r.lastChild===e&&n(r),this.points&&(this.points.length<t.pointDescriptionThreshold||!1===t.pointDescriptionThreshold)&&s(this.points,function(e){e.graphic&&(e.graphic.element.setAttribute("role","img"),e.graphic.element.setAttribute("tabindex","-1"),e.graphic.element.setAttribute("aria-label",i(e.series.options.pointDescriptionFormatter&&e.series.options.pointDescriptionFormatter(e)||t.pointDescriptionFormatter&&t.pointDescriptionFormatter(e)||e.buildPointInfoString())))}),1<this.chart.series.length||t.describeSingleSeries)&&(r.setAttribute("role",this.options.exposeElementToA11y?"img":"region"),r.setAttribute("tabindex","-1"),r.setAttribute("aria-label",i(t.seriesDescriptionFormatter&&t.seriesDescriptionFormatter(this)||this.buildSeriesInfoString())))},t.Series.prototype.buildSeriesInfoString=function(){var t=this.chart,e=(e=this.description||this.options.description)&&t.langFormat("accessibility.series.description",{description:e,series:this}),i=t.langFormat("accessibility.series.xAxisDescription",{name:this.xAxis&&this.xAxis.getDescription(),series:this}),n=t.langFormat("accessibility.series.yAxisDescription",{name:this.yAxis&&this.yAxis.getDescription(),series:this}),r={name:this.name||"",ix:this.index+1,numSeries:t.series.length,numPoints:this.points.length,series:this},s=1===t.types.length?"":"Combination";return(t.langFormat("accessibility.series.summary."+this.type+s,r)||t.langFormat("accessibility.series.summary.default"+s,r))+(e?" "+e:"")+(1<t.yAxis.length&&this.yAxis?" "+n:"")+(1<t.xAxis.length&&this.xAxis?" "+i:"")},t.Point.prototype.buildPointInfoString=function(){var e=this,i=e.series,n=i.chart.options.accessibility,r="",o=i.xAxis&&i.xAxis.isDatetimeAxis,n=o&&i.chart.time.dateFormat(n.pointDateFormatter&&n.pointDateFormatter(e)||n.pointDateFormat||t.Tooltip.prototype.getXDateFormat.call({getDateFormat:t.Tooltip.prototype.getDateFormat,chart:i.chart},e,i.chart.options.tooltip,i.xAxis),e.x);return t.find(i.specialKeys,function(t){return void 0!==e[t]})?(o&&(r=n),s(i.commonKeys.concat(i.specialKeys),function(t){void 0===e[t]||o&&"x"===t||(r+=(r?". ":"")+t+", "+e[t])})):r=(this.name||n||this.category||this.id||"x, "+this.x)+", "+(void 0!==this.value?this.value:this.y),this.index+1+". "+r+"."+(this.description?" "+this.description:"")},t.Axis.prototype.getDescription=function(){return this.userOptions&&this.userOptions.description||this.axisTitle&&this.axisTitle.textStr||this.options.id||this.categories&&"categories"||this.isDatetimeAxis&&"Time"||"values"},l(t.Series,"afterInit",function(){var t=this.chart;t.options.accessibility.enabled&&(t.types=t.types||[],0>t.types.indexOf(this.type)&&t.types.push(this.type))}),l(t.Series,"remove",function(){var t=this.chart,e=this,i=!1;s(t.series,function(n){n!==e&&0>t.types.indexOf(e.type)&&(i=!0)}),i||a(t.types,e.type)}),t.Chart.prototype.getTypeDescription=function(){var t=this.types&&this.types[0],e=(n=this.series&&this.series[0]||{}).mapTitle,i=this.langFormat("accessibility.seriesTypeDescriptions."+t,{chart:this}),n={numSeries:this.series.length,numPoints:n.points&&n.points.length,chart:this,mapTitle:e},r=this.series&&1===this.series.length?"Single":"Multiple";return t?"map"===t?e?this.langFormat("accessibility.chartTypes.mapTypeDescription",n):this.langFormat("accessibility.chartTypes.unknownMap",n):1<this.types.length?this.langFormat("accessibility.chartTypes.combinationChart",n):(this.langFormat("accessibility.chartTypes."+t+r,n)||this.langFormat("accessibility.chartTypes.default"+r,n))+(i?" "+i:""):this.langFormat("accessibility.chartTypes.emptyChart",n)},t.Chart.prototype.getAxesDescription=function(){var t=this.xAxis.length,e=this.yAxis.length,i={};return t&&(i.xAxis=this.langFormat("accessibility.axis.xAxisDescription"+(1<t?"Plural":"Singular"),{chart:this,names:o(this.xAxis,function(t){return t.getDescription()}),numAxes:t})),e&&(i.yAxis=this.langFormat("accessibility.axis.yAxisDescription"+(1<e?"Plural":"Singular"),{chart:this,names:o(this.yAxis,function(t){return t.getDescription()}),numAxes:e})),i},t.Chart.prototype.addAccessibleContextMenuAttribs=function(){var t=this.exportDivElements;t&&(s(t,function(t){"DIV"!==t.tagName||t.children&&t.children.length||(t.setAttribute("role","menuitem"),t.setAttribute("tabindex",-1))}),t[0].parentNode.setAttribute("role","menu"),t[0].parentNode.setAttribute("aria-label",this.langFormat("accessibility.exporting.chartMenuLabel",{chart:this})))},t.Chart.prototype.addScreenReaderRegion=function(t,e){var i=this,n=i.screenReaderRegion=r.createElement("div"),s=r.createElement("h4"),o=r.createElement("a"),a=r.createElement("h4");n.setAttribute("id",t),n.setAttribute("role","region"),n.setAttribute("aria-label",i.langFormat("accessibility.screenReaderRegionLabel",{chart:this})),n.innerHTML=i.options.accessibility.screenReaderSectionFormatter(i),i.getCSV&&(o.innerHTML=i.langFormat("accessibility.viewAsDataTable",{chart:i}),o.href="#"+e,o.setAttribute("tabindex","-1"),o.onclick=i.options.accessibility.onTableAnchorClick||function(){i.viewData(),r.getElementById(e).focus()},s.appendChild(o),n.appendChild(s)),a.innerHTML=i.langFormat("accessibility.chartHeading",{chart:i}),i.renderTo.insertBefore(a,i.renderTo.firstChild),i.renderTo.insertBefore(n,i.renderTo.firstChild),h(!0,a.style,u),h(!0,n.style,u)},t.Chart.prototype.callbacks.push(function(e){var n=e.options;if(n.accessibility.enabled){var o=e.container.getElementsByTagName("desc")[0],a=e.container.getElementsByTagName("text"),l="highcharts-title-"+e.index,h="highcharts-data-table-"+e.index,u="highcharts-information-region-"+e.index,c=n.title.text||e.langFormat("accessibility.defaultChartTitle",{chart:e}),p=i(e.langFormat("accessibility.svgContainerTitle",{chartTitle:c}));if(p.length&&(n=r.createElementNS("http://www.w3.org/2000/svg","title"),n.textContent=p,n.id=l,o.parentNode.insertBefore(n,o)),e.renderTo.setAttribute("role","region"),e.renderTo.setAttribute("aria-label",e.langFormat("accessibility.chartContainerLabel",{title:i(c),chart:e})),e.exportSVGElements&&e.exportSVGElements[0]&&e.exportSVGElements[0].element){var d=(o=e.exportSVGElements[0].element).onclick;o.onclick=function(){d.apply(this,Array.prototype.slice.call(arguments)),e.addAccessibleContextMenuAttribs(),e.highlightExportItem(0)},o.setAttribute("role","button"),o.setAttribute("aria-label",e.langFormat("accessibility.exporting.menuButtonLabel",{chart:e})),e.exportingGroup.element.setAttribute("role","region"),e.exportingGroup.element.setAttribute("aria-label",e.langFormat("accessibility.exporting.exportRegionLabel",{chart:e}))}e.rangeSelector&&s(["minInput","maxInput"],function(t,i){e.rangeSelector[t]&&(e.rangeSelector[t].setAttribute("tabindex","-1"),e.rangeSelector[t].setAttribute("role","textbox"),e.rangeSelector[t].setAttribute("aria-label",e.langFormat("accessibility.rangeSelector"+(i?"MaxInput":"MinInput"),{chart:e})))}),s(a,function(t){t.setAttribute("aria-hidden","true")}),e.addScreenReaderRegion(u,h),t.wrap(e,"getTable",function(t){return t.apply(this,Array.prototype.slice.call(arguments,1)).replace("<table>",'<table id="'+h+'" summary="'+e.langFormat("accessibility.tableSummary",{chart:e})+'">')})}})}(t),function(t){function e(t){return"string"==typeof t?t.replace(/<\/?[^>]+(>|$)/g,""):t}function i(t,e){this.chart=t,this.id=e.id,this.keyCodeMap=e.keyCodeMap,this.validate=e.validate,this.init=e.init,this.terminate=e.terminate}function n(t){var e;t&&t.onclick&&a.createEvent&&((e=a.createEvent("Events")).initEvent("click",!0,!1),t.onclick(e))}function r(t){var e=t.series.chart.options.accessibility;return t.isNull&&e.keyboardNavigation.skipNullPoints||t.series.options.skipKeyboardNavigation||!t.series.visible||!1===t.visible||e.pointDescriptionThreshold&&e.pointDescriptionThreshold<=t.series.points.length}var s,o=t.win,a=o.document,l=t.each,h=t.addEvent,u=t.fireEvent,c=t.merge,p=t.pick;t.extend(t.SVGElement.prototype,{addFocusBorder:function(t,e){this.focusBorder&&this.removeFocusBorder();var i=this.getBBox();t=p(t,3),this.focusBorder=this.renderer.rect(i.x-t,i.y-t,i.width+2*t,i.height+2*t,e&&e.borderRadius).addClass("highcharts-focus-border").attr({stroke:e&&e.stroke,"stroke-width":e&&e.strokeWidth}).attr({zIndex:99}).add(this.parentGroup)},removeFocusBorder:function(){this.focusBorder&&(this.focusBorder.destroy(),delete this.focusBorder)}}),t.Series.prototype.keyboardMoveVertical=!0,l(["column","pie"],function(e){t.seriesTypes[e]&&(t.seriesTypes[e].prototype.keyboardMoveVertical=!1)}),t.setOptions({accessibility:{keyboardNavigation:{enabled:!0,focusBorder:{enabled:!0,hideBrowserFocusOutline:!0,style:{color:"#335cad",lineWidth:2,borderRadius:3},margin:2},skipNullPoints:!0}}}),i.prototype={run:function(t){var e=this,i=t.which||t.keyCode,n=!1,r=!1;return l(this.keyCodeMap,function(s){-1<s[0].indexOf(i)&&(n=!0,r=!1!==s[1].call(e,i,t))}),n||9!==i||(r=this.move(t.shiftKey?-1:1)),r},move:function(t){var e=this.chart;this.terminate&&this.terminate(t),e.keyboardNavigationModuleIndex+=t;var i=e.keyboardNavigationModules[e.keyboardNavigationModuleIndex];if(e.focusElement&&e.focusElement.removeFocusBorder(),i){if(i.validate&&!i.validate())return this.move(t);if(i.init)return i.init(t),!0}return e.keyboardNavigationModuleIndex=0,0<t?(this.chart.exiting=!0,this.chart.tabExitAnchor.focus()):this.chart.renderTo.focus(),!1}},t.Axis.prototype.panStep=function(t,e){var i=e||3,n=((e=this.getExtremes()).max-e.min)/i*t,r=(i=e.max+n)-(n=e.min+n);0>t&&n<e.dataMin?(n=e.dataMin,i=n+r):0<t&&i>e.dataMax&&(i=e.dataMax,n=i-r),this.setExtremes(n,i)},t.Chart.prototype.setFocusToElement=function(t,e){var i=this.options.accessibility.keyboardNavigation.focusBorder;(e=e||t).element&&e.element.focus&&(e.element.focus(),i.hideBrowserFocusOutline&&e.css({outline:"none"})),i.enabled&&(this.focusElement&&this.focusElement.removeFocusBorder(),t.addFocusBorder(i.margin,{stroke:i.style.color,strokeWidth:i.style.lineWidth,borderRadius:i.style.borderRadius}),this.focusElement=t)},t.Point.prototype.highlight=function(){var t=this.series.chart;return this.isNull?t.tooltip&&t.tooltip.hide(0):this.onMouseOver(),this.graphic&&t.setFocusToElement(this.graphic),t.highlightedPoint=this,this},t.Chart.prototype.highlightAdjacentPoint=function(t){var e=this.series,i=this.highlightedPoint,n=i&&i.index||0,s=i&&i.series.points,o=(o=this.series&&this.series[this.series.length-1])&&o.points&&o.points[o.points.length-1];if(!e[0]||!e[0].points)return!1;if(i){if(s[n]!==i)for(o=0;o<s.length;++o)if(s[o]===i){n=o;break}if(e=e[i.series.index+(t?1:-1)],!(n=s[n+(t?1:-1)]||e&&e.points[t?0:e.points.length-1]))return!1}else n=t?e[0].points[0]:o;return r(n)?(this.highlightedPoint=n,this.highlightAdjacentPoint(t)):n.highlight()},t.Series.prototype.highlightFirstValidPoint=function(){var t=this.chart.highlightedPoint,e=(t&&t.series)===this?t.index:0;if(t=this.points){for(var i=e,n=t.length;i<n;++i)if(!r(t[i]))return t[i].highlight();for(;0<=e;--e)if(!r(t[e]))return t[e].highlight()}return!1},t.Chart.prototype.highlightAdjacentSeries=function(t){var e,i,n=this.highlightedPoint,r=(e=this.series&&this.series[this.series.length-1])&&e.points&&e.points[e.points.length-1];if(!this.highlightedPoint)return e=t?this.series&&this.series[0]:e,!!(i=t?e&&e.points&&e.points[0]:r)&&i.highlight();if(!(e=this.series[n.series.index+(t?-1:1)]))return!1;var s,r=1/0,o=e.points.length;if(void 0===n.plotX||void 0===n.plotY)i=void 0;else{for(;o--;)void 0!==(s=e.points[o]).plotX&&void 0!==s.plotY&&(s=(n.plotX-s.plotX)*(n.plotX-s.plotX)*4+(n.plotY-s.plotY)*(n.plotY-s.plotY)*1)<r&&(r=s,i=o);i=void 0!==i&&e.points[i]}return!!i&&(e.visible?(i.highlight(),i.series.highlightFirstValidPoint()):(i.highlight(),(t=this.highlightAdjacentSeries(t))||(n.highlight(),!1)))},t.Chart.prototype.highlightAdjacentPointVertical=function(t){var e,i=this.highlightedPoint,n=1/0;return void 0!==i.plotX&&void 0!==i.plotY&&(l(this.series,function(s){l(s.points,function(o){if(void 0!==o.plotY&&void 0!==o.plotX&&o!==i){var a=o.plotY-i.plotY,l=Math.abs(o.plotX-i.plotX),l=Math.abs(a)*Math.abs(a)+l*l*4;s.yAxis.reversed&&(a*=-1),!(0>a&&t||0<a&&!t||5>l||r(o))&&l<n&&(n=l,e=o)}})}),!!e&&e.highlight())},t.Chart.prototype.showExportMenu=function(){this.exportSVGElements&&this.exportSVGElements[0]&&(this.exportSVGElements[0].element.onclick(),this.highlightExportItem(0))},t.Chart.prototype.hideExportMenu=function(){var t=this.exportDivElements;t&&(l(t,function(t){u(t,"mouseleave")}),t[this.highlightedExportItem]&&t[this.highlightedExportItem].onmouseout&&t[this.highlightedExportItem].onmouseout(),this.highlightedExportItem=0,s&&this.renderTo.focus())},t.Chart.prototype.highlightExportItem=function(t){var e=this.exportDivElements&&this.exportDivElements[t],i=this.exportDivElements&&this.exportDivElements[this.highlightedExportItem];if(e&&"DIV"===e.tagName&&(!e.children||!e.children.length))return e.focus&&s&&e.focus(),i&&i.onmouseout&&i.onmouseout(),e.onmouseover&&e.onmouseover(),this.highlightedExportItem=t,!0},t.Chart.prototype.highlightLastExportItem=function(){var t;if(this.exportDivElements)for(t=this.exportDivElements.length;t--&&!this.highlightExportItem(t););},t.Chart.prototype.highlightRangeSelectorButton=function(t){var e=this.rangeSelector.buttons;return e[this.highlightedRangeSelectorItemIx]&&e[this.highlightedRangeSelectorItemIx].setState(this.oldRangeSelectorItemState||0),this.highlightedRangeSelectorItemIx=t,!!e[t]&&(this.setFocusToElement(e[t].box,e[t]),this.oldRangeSelectorItemState=e[t].state,e[t].setState(2),!0)},t.Chart.prototype.highlightLegendItem=function(t){var e=this.legend.allItems,i=this.highlightedLegendItemIx;return!!e[t]&&(e[i]&&u(e[i].legendGroup.element,"mouseout"),void 0!==e[t].pageIx&&e[t].pageIx+1!==this.legend.currentPage&&this.legend.scroll(1+e[t].pageIx-this.legend.currentPage),this.highlightedLegendItemIx=t,this.setFocusToElement(e[t].legendItem,e[t].legendGroup),u(e[t].legendGroup.element,"mouseover"),!0)},t.Chart.prototype.addKeyboardNavigationModules=function(){function t(t,e,n){return new i(r,c({keyCodeMap:e},{id:t},n))}var r=this;r.keyboardNavigationModules=[t("entry",[]),t("points",[[[37,39],function(t){return t=39===t,!!r.highlightAdjacentPoint(t)||this.init(t?1:-1)}],[[38,40],function(t){t=38!==t;var e=r.options.accessibility.keyboardNavigation;return e.mode&&"serialize"===e.mode?!!r.highlightAdjacentPoint(t)||this.init(t?1:-1):(r[r.highlightedPoint&&r.highlightedPoint.series.keyboardMoveVertical?"highlightAdjacentPointVertical":"highlightAdjacentSeries"](t),!0)}],[[13,32],function(){r.highlightedPoint&&r.highlightedPoint.firePointEvent("click")}]],{init:function(t){var e=r.series.length,i=0<t?0:e;if(0<t)for(delete r.highlightedPoint;i<e;){if(t=r.series[i].highlightFirstValidPoint())return t;++i}else for(;i--;)if(r.highlightedPoint=r.series[i].points[r.series[i].points.length-1],t=r.series[i].highlightFirstValidPoint())return t},terminate:function(){r.tooltip&&r.tooltip.hide(0),delete r.highlightedPoint}}),t("exporting",[[[37,38],function(){for(var t=r.highlightedExportItem||0,e=!0;t--;)if(r.highlightExportItem(t)){e=!1;break}if(e)return r.highlightLastExportItem(),!0}],[[39,40],function(){for(var t=!0,e=(r.highlightedExportItem||0)+1;e<r.exportDivElements.length;++e)if(r.highlightExportItem(e)){t=!1;break}if(t)return r.highlightExportItem(0),!0}],[[13,32],function(){n(r.exportDivElements[r.highlightedExportItem])}]],{validate:function(){return r.exportChart&&!(r.options.exporting&&!1===r.options.exporting.enabled)},init:function(t){r.highlightedPoint=null,r.showExportMenu(),0>t&&r.highlightLastExportItem()},terminate:function(){r.hideExportMenu()}}),t("mapZoom",[[[38,40,37,39],function(t){r[38===t||40===t?"yAxis":"xAxis"][0].panStep(39>t?-1:1)}],[[9],function(t,e){if(r.mapNavButtons[r.focusedMapNavButtonIx].setState(0),e.shiftKey&&!r.focusedMapNavButtonIx||!e.shiftKey&&r.focusedMapNavButtonIx)return r.mapZoom(),this.move(e.shiftKey?-1:1);r.focusedMapNavButtonIx+=e.shiftKey?-1:1,t=r.mapNavButtons[r.focusedMapNavButtonIx],r.setFocusToElement(t.box,t),t.setState(2)}],[[13,32],function(){n(r.mapNavButtons[r.focusedMapNavButtonIx].element)}]],{validate:function(){return r.mapZoom&&r.mapNavButtons&&2===r.mapNavButtons.length},init:function(t){var e=r.mapNavButtons[0],i=r.mapNavButtons[1],e=0<t?e:i;l(r.mapNavButtons,function(t,e){t.element.setAttribute("tabindex",-1),t.element.setAttribute("role","button"),t.element.setAttribute("aria-label",r.langFormat("accessibility.mapZoom"+(e?"Out":"In"),{chart:r}))}),r.setFocusToElement(e.box,e),e.setState(2),r.focusedMapNavButtonIx=0<t?0:1}}),t("rangeSelector",[[[37,39,38,40],function(t){if(t=37===t||38===t?-1:1,!r.highlightRangeSelectorButton(r.highlightedRangeSelectorItemIx+t))return this.move(t)}],[[13,32],function(){3!==r.oldRangeSelectorItemState&&n(r.rangeSelector.buttons[r.highlightedRangeSelectorItemIx].element)}]],{validate:function(){return r.rangeSelector&&r.rangeSelector.buttons&&r.rangeSelector.buttons.length},init:function(t){l(r.rangeSelector.buttons,function(t){t.element.setAttribute("tabindex","-1"),t.element.setAttribute("role","button"),t.element.setAttribute("aria-label",r.langFormat("accessibility.rangeSelectorButton",{chart:r,buttonText:t.text&&t.text.textStr}))}),r.highlightRangeSelectorButton(0<t?0:r.rangeSelector.buttons.length-1)}}),t("rangeSelectorInput",[[[9,38,40],function(t,e){if(t=9===t&&e.shiftKey||38===t?-1:1,1<(e=r.highlightedInputRangeIx+=t)||0>e)return this.move(t);r.rangeSelector[e?"maxInput":"minInput"].focus()}]],{validate:function(){return r.rangeSelector&&r.rangeSelector.inputGroup&&"hidden"!==r.rangeSelector.inputGroup.element.getAttribute("visibility")&&!1!==r.options.rangeSelector.inputEnabled&&r.rangeSelector.minInput&&r.rangeSelector.maxInput},init:function(t){r.highlightedInputRangeIx=0<t?0:1,r.rangeSelector[r.highlightedInputRangeIx?"maxInput":"minInput"].focus()}}),t("legend",[[[37,39,38,40],function(t){t=37===t||38===t?-1:1,!r.highlightLegendItem(r.highlightedLegendItemIx+t)&&1<r.legend.allItems.length&&this.init(t)}],[[13,32],function(){n(r.legend.allItems[r.highlightedLegendItemIx].legendItem.element.parentNode)}]],{validate:function(){return r.legend&&r.legend.allItems&&r.legend.display&&!(r.colorAxis&&r.colorAxis.length)&&!1!==(r.options.legend&&r.options.legend.keyboardNavigation&&r.options.legend.keyboardNavigation.enabled)},init:function(t){l(r.legend.allItems,function(t){t.legendGroup.element.setAttribute("tabindex","-1"),t.legendGroup.element.setAttribute("role","button"),t.legendGroup.element.setAttribute("aria-label",r.langFormat("accessibility.legendItem",{chart:r,itemName:e(t.name)}))}),r.highlightLegendItem(0<t?0:r.legend.allItems.length-1)}})]},t.Chart.prototype.addExitAnchor=function(){var t=this;return t.tabExitAnchor=a.createElement("div"),t.tabExitAnchor.setAttribute("tabindex","0"),c(!0,t.tabExitAnchor.style,{position:"absolute",left:"-9999px",top:"auto",width:"1px",height:"1px",overflow:"hidden"}),t.renderTo.appendChild(t.tabExitAnchor),h(t.tabExitAnchor,"focus",function(e){e=e||o.event,t.exiting?t.exiting=!1:(t.renderTo.focus(),e.preventDefault(),t.keyboardNavigationModuleIndex=t.keyboardNavigationModules.length-1,(e=t.keyboardNavigationModules[t.keyboardNavigationModuleIndex]).validate&&!e.validate()?e.move(-1):e.init(-1))})},t.Chart.prototype.resetKeyboardNavigation=function(){var t=this.keyboardNavigationModules&&this.keyboardNavigationModules[this.keyboardNavigationModuleIndex||0];t&&t.terminate&&t.terminate(),this.focusElement&&this.focusElement.removeFocusBorder(),this.keyboardNavigationModuleIndex=0,this.keyboardReset=!0},t.addEvent(t.Series,"destroy",function(){var t=this.chart;t.highlightedPoint&&t.highlightedPoint.series===this&&(delete t.highlightedPoint,t.focusElement&&t.focusElement.removeFocusBorder())}),t.Chart.prototype.callbacks.push(function(t){var e=t.options.accessibility;e.enabled&&e.keyboardNavigation.enabled&&(s=!!t.renderTo.getElementsByTagName("g")[0].focus,t.addKeyboardNavigationModules(),t.keyboardNavigationModuleIndex=0,t.container.hasAttribute&&!t.container.hasAttribute("tabIndex")&&t.container.setAttribute("tabindex","0"),t.tabExitAnchor||(t.unbindExitAnchorFocus=t.addExitAnchor()),t.unbindKeydownHandler=h(t.renderTo,"keydown",function(e){e=e||o.event;var i=t.keyboardNavigationModules[t.keyboardNavigationModuleIndex];t.keyboardReset=!1,i&&i.run(e)&&e.preventDefault()}),t.unbindBlurHandler=h(a,"mouseup",function(){t.keyboardReset||t.pointer&&t.pointer.chartPosition||t.resetKeyboardNavigation()}),h(t,"destroy",function(){t.resetKeyboardNavigation(),t.unbindExitAnchorFocus&&t.tabExitAnchor&&t.unbindExitAnchorFocus(),t.unbindKeydownHandler&&t.renderTo&&t.unbindKeydownHandler(),t.unbindBlurHandler&&t.unbindBlurHandler()}))})}(t)});